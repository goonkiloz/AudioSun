# API Documentation

## USER AUTHENTICATION/AUTHORIZATION

### All endpoints that require authentication

All endpoints that require a current user to be logged in.

* Request: endpoints that require authentication
* Error Response: Require authentication
  * Status Code: 401
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Authentication required"
    }
    ```

### All endpoints that require proper authorization

All endpoints that require authentication and the current user does not have the
correct role(s) or permission(s).

* Request: endpoints that require proper authorization
* Error Response: Require proper authorization
  * Status Code: 403
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Forbidden"
    }
    ```

### Get the Current User

Returns the information about the current user that is logged in.

* Require Authentication: false
* Request
  * Method: GET
  * URL: /api/session
  * Body: none

* Successful Response when there is a logged in user
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "user": {
        "id": 1,
        "firstName": "John",
        "lastName": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith"
      }
    }
    ```

* Successful Response when there is no logged in user
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "user": null
    }
    ```

### Log In a User

Logs in a current user with valid credentials and returns the current user's
information.

* Require Authentication: false
* Request
  * Method: POST
  * URL: /api/session
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "credential": "john.smith@gmail.com",
      "password": "secret password"
    }
    ```

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "user": {
        "id": 1,
        "firstName": "John",
        "lastName": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith"
      }
    }
    ```

* Error Response: Invalid credentials
  * Status Code: 401
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Invalid credentials"
    }
    ```

* Error response: Body validation errors
  * Status Code: 400
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "credential": "Email or username is required",
        "password": "Password is required"
      }
    }
    ```

### Sign Up a User

Creates a new user, logs them in as the current user, and returns the current
user's information.

* Require Authentication: false
* Request
  <!--!!START SILENT -->
  * Method: POST
  * URL: /api/users
  <!--!!END -->
  <!--!!ADD -->
  <!-- * Method: ? -->
  <!-- * URL: ? -->
  <!--!!END_ADD -->
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "firstName": "John",
      "lastName": "Smith",
      "email": "john.smith@gmail.com",
      "username": "JohnSmith",
      "password": "secret password"
    }
    ```

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "user": {
        "id": 1,
        "firstName": "John",
        "lastName": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith"
      }
    }
    ```

* Error response: User already exists with the specified email
  * Status Code: 500
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "User already exists",
      "errors": {
        "email": "User with that email already exists"
      }
    }
    ```

* Error response: User already exists with the specified username
  * Status Code: 500
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "User already exists",
      "errors": {
        "username": "User with that username already exists"
      }
    }
    ```

* Error response: Body validation errors
  * Status Code: 400
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "email": "Invalid email",
        "username": "Username is required",
        "firstName": "First Name is required",
        "lastName": "Last Name is required"
      }
    }
    ```
## SONGS
### View all songs

Retrieves all songs regardless of the sign-in status.

* Require Authentication: false
* Request
  * Method: GET
  * URL: api/songs
  * Headers: none
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
        "songs": [
            {
                "id": 1,
                "title": "Song title",
                "albumn": "albumb name",
                "genre": "pop",
                "descrtiption": "great pop song",
                "songImage": "https:songimage.img",
                "filePath": "https:awgpe.mp3",
                "userId": 1,
            }
        ]
    }
    ```

### Get all songs by current user

Retrieves all songs owned by the current user.

* Require Authentication: true
* Request
  * Method: GET
  * URL: api/songs/current
  * Headers: none
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
        "songs": [
            {
                "id": 1,
                "title": "Song title",
                "albumn": "albumb name",
                "genre": "pop",
                "descrtiption": "great pop song",
                "songImage": "https:songimage.img",
                "filePath": "https:awgpe.mp3",
                "userId": 1,
            }
        ]
    }
    ```

<!-- * Error Response: Invalid credentials
  * Status Code: 401
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Invalid credentials"
    }
    ```

* Error response: Body validation errors
  * Status Code: 400
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "credential": "Email or username is required",
        "password": "Password is required"
      }
    }
    ``` -->

### Create/Upload a song

Create a song based on songId when signed in

* Require Authentication: true
* Request
  * Method: POST
  * URL: api/songs
  * Headers: application/json
  * Body:
    ```json

    ```

* Successful Response
  * Status Code: 201
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```


### Update a song

update a song based on songId when signed in

* Require Authentication: true
* Request
  * Method: PATCH/PUT
  * URL: api/songs/:songId
  * Headers: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

### Delete a song

update a song based on songId when signed in

* Require Authentication: true
* Request
  * Method: DELETE
  * URL: api/songs/:songId
  * Headers: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

## COMMENTS
### Get comments from a song

get all comments from a song based on songId

* Require Authentication: false
* Request
  * Method: GET
  * URL: api/songs/:songId/comments
  * Headers: none
  * Body:none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```


### Add a comment to a song
add a comment to a song based on songId, do we need song Id

* Require Authentication: true
* Request
  * Method: POST
  * URL: /api/songs/:songId/comments
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Successful Response
  * Status Code: 201
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Error Response
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

### Update a comment to a song
revise a comment to a song based on songId

* Require Authentication: true
* Request
  * Method: UPDATE/PUT
  * URL: /api/comments/:commentId
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Error Response
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

### Remove a comment to a song

Remove a comment to a song based on songId

* Require Authentication: true
* Request
  * Method: DELETE
  * URL: /api/comments/:commentId
  * Headers: none
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Error Response
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```


## LIKES
### view all the likes on a song
get all likes from a song

* Require Authentication: false
* Request
  * Method: GET
  * URL: /api/songs/:songId/likes
  * Headers: none
  * Body:none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```


### Add a like to a song
add a like to a song

* Require Authentication: true
* Request
  * Method: POST
  * URL: /api/songs/:songId/likes
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Successful Response
  * Status Code: 201
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Error Response
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

### Remove a like to a song
Remove a like to a song

* Require Authentication: true
* Request
  * Method: DELETE
  * URL: /api/songs/:songId/likes
         * /api/songs/:songId/likes/:likeId do we need likeId?
  * Headers: none
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Error Response
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }


## LISTS
### Get all playlists belongs to a user
get all playlists based on currently sign-in user

* Require Authentication: true
* Request
  * Method: GET
  * URL: /api/playlists
  * Headers: none
  * Body:none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Error Response
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```


### Add a song to a playlist
add a song to a playlist that belongs to the current user

* Require Authentication: true
* Request
  * Method: POST
  * URL: /api/playlists/:playlistId/songs
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Successful Response
  * Status Code: 201
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Error Response
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```


### Remove a song from a playlist
Remove a song from a playlist that belongs to the current user

* Require Authentication: true
* Request
  * Method: DELETE
  * URL: /api/playlists/:playlistId/songs/:songId  Do we need songId???
  * Headers: none
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
        ```

* Error Response
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:
        ```json
            {
            TBD
            }
